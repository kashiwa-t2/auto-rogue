# auto-rogue

Godot 4.x で開発するスマホ縦画面向けの放置ゲーム

## 開発環境

- Godot 4.3以上
- 解像度: 720x1280 (スマホ縦画面)

## プロジェクト構成

```
auto-rogue/
├── src/
│   ├── scenes/          # シーンファイル(.tscn)
│   │   ├── MainScene.tscn       # メインゲーム画面
│   │   ├── Player.tscn          # プレイヤーキャラクター
│   │   └── BasicEnemy.tscn      # 基本敵キャラクター
│   └── scripts/         # スクリプトファイル(.gd)
│       ├── GameConstants.gd     # 定数管理 (autoload)
│       ├── MainScene.gd         # メインシーン・戦闘制御
│       ├── Player.gd            # プレイヤー・武器制御
│       ├── EnemyBase.gd         # 敵基底クラス
│       ├── BasicEnemy.gd        # 基本敵（突進攻撃）
│       ├── TestPlayer.gd        # テスト機能
│       ├── ScrollerBase.gd      # スクロール基底クラス
│       ├── BackgroundScroller.gd # 背景スクロール
│       ├── GroundScroller.gd    # 地面スクロール
│       └── ScrollManager.gd     # スクロール統合管理
├── assets/
│   └── sprites/kenney_pixel-platformer/
│       ├── Tiles/Backgrounds/   # 背景画像 (tile_0008~0011)
│       ├── Tiles/Characters/    # キャラ画像 (tile_0000~0001, tile_0018~0019)
│       └── Tiles/               # 地面画像 (tile_0022)
│   └── sprites/kenney_tiny-dungeon/
│       └── Tiles/               # 武器画像 (tile_0103)
└── project.godot
```

## 動作確認

1. Godotエディタでプロジェクトを開く
2. F6キーで実行
3. **ゲーム画面構成**:
   - **上部1/3**: プレイエリア（背景・地面・プレイヤー・敵）
   - **下部2/3**: UIエリア（テストボタン）
4. プレイヤーが地面上で歩行アニメーション
5. 背景・地面が右→左にスクロール
6. **1m地点で敵が出現**: 画面右端からBasicEnemyが歩いてくる
7. **敵接近時に自動戦闘**: プレイヤーが剣で攻撃、敵が突進攻撃

## 主要機能

### スクロールシステム
- **背景スクロール**: 4枚画像の無限ループ
- **地面スクロール**: 1枚タイルの連続表示
- **統一管理**: ScrollManagerによる一元制御
- **戦闘時停止**: 戦闘中のスクロール自動制御

### プレイヤーシステム  
- **歩行アニメーション**: 2フレーム切り替え (4fps)
- **武器システム**: 剣による攻撃アニメーション
- **3倍スケール**: 視認性の向上
- **地面接地**: 自動位置調整
- **戦闘連携**: 敵接近時の自動攻撃開始

### エネミーシステム
- **敵出現**: 1m地点でBasicEnemyが画面右端から登場
- **歩行AI**: 左方向への自動移動
- **戦闘AI**: プレイヤー接近時の突進攻撃アニメーション
- **拡張可能設計**: EnemyBase継承による新敵タイプ追加対応

### 戦闘システム
- **自動判定**: プレイヤーと敵の距離による戦闘開始/終了
- **攻撃アニメーション**: プレイヤーの剣振り、敵の突進攻撃
- **ゲーム進行制御**: 戦闘中のスクロール・移動停止

### テスト機能
- **手動テスト**: UI ボタンでの動作確認
- **自動テスト**: F12キーで包括的テスト実行
  - プレイヤー機能テスト
  - スクロールシステムテスト  
  - 定数整合性テスト
  - 統合テスト

## アーキテクチャ

### 階層化設計
1. **基底クラス**: ScrollerBase・EnemyBase による共通処理統一
2. **具象クラス**: Background/Ground スクローラー・BasicEnemy 特化実装
3. **管理クラス**: ScrollManager による統一制御
4. **定数管理**: 論理的グループ分けによる整理

### 主要改善点
- **継承アーキテクチャ**: 基底クラスによる機能の共通化
- **拡張可能設計**: 新敵タイプ・新機能の簡単追加
- **戦闘システム統合**: プレイヤー・敵・UI の連携制御
- **エラーハンドリング**: 安全なリソース読み込み処理
- **テスト拡張**: 包括的なテストカバレッジ

## 今後の拡張予定

### ゲームプレイ機能
- **敵バリエーション**: FAST・STRONG・BOSS敵タイプの実装
- **HP・攻撃力システム**: ダメージ計算と敵撃破機能
- **ゴールドシステム**: 敵撃破時のリワード機能
- **拠点システム**: 強化メニューとゲーム進行管理

### 技術改善
- **GUT (Godot Unit Test)**: より高度なテストフレームワーク導入
- **セーブシステム**: プレイヤー進行状況の永続化
- **パフォーマンス最適化**: 大量敵出現時の処理効率化

### UI/UX向上
- **UI エリア活用**: 下部2/3エリアでの拠点メニュー実装
- **視覚エフェクト**: 戦闘時のエフェクト・パーティクル
- **サウンドシステム**: BGM・効果音の統合